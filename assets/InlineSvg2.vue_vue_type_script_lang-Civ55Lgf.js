import{D as q,r as p,p as E,h as I}from"./modules/vue-DcGPefT6.js";import"./index-BNjHXp7a.js";import{u as T}from"./slidev/context-DDVT8oB6.js";let k=1;function H(){let i="uniquesvg"+k;return k++,i}let L=["clip-path","color-profile","fill","filter","marker-start","marker-mid","marker-end","mask","stroke"];const W={props:{src:{default:""},wrap:{default:void 0},width:{default:void 0},height:{default:void 0},opts:{default:{}}},setup(i,$){var A,b,v;const y=q("notifyAsyncDone",p(()=>{})),{$slidev:g}=T();let S=((v=(b=(A=g==null?void 0:g.configs)==null?void 0:A.addonsConfig)==null?void 0:b.ultracharger)==null?void 0:v.inlineSvg)??{};const w=p("");return async function(){if(i.src.then)console.log("promise"),w.value=(await i.src).default,console.log(w.value);else{let d=new URL("../"+i.src,import.meta.url),o=await fetch(d);w.value=await o.text()}}(),()=>{E(()=>{y.value()});let d=w.value,o=Object.assign({addViewBox:!0,xlinkRewrite:!0,prefixHrefs:!0,styleToAttributes:!0,idRewrite:!0,markersWorkaround:!1},S,i.opts);if(d){let m=document.createElement("div");m.innerHTML=d;let l=m.children[0];if(o.addViewBox){let t=l.getAttribute("viewBox");if(t===null){let r={"":1,px:1,cm:37.79527559055118,mm:3.779527559055118,Q:.9448818897637795,in:96,pc:16,pt:1.3333333333333333},f=a=>{var u=a.split(/^([\d.]+)/).slice(1);return parseFloat(u[0])*r[u[1]]},s=l.getAttribute("width"),e=l.getAttribute("height");t=`0 0 ${f(s)} ${f(e)}`,l.setAttribute("viewBox",t)}l.removeAttribute("width"),l.removeAttribute("height")}if(o.xlinkRewrite&&l.querySelectorAll("[*|href]:not([href])").forEach(t=>{t.hasAttributeNS("http://www.w3.org/1999/xlink","href")&&(t.setAttribute("href",t.getAttributeNS("http://www.w3.org/1999/xlink","href")),t.removeAttributeNS("http://www.w3.org/1999/xlink","href"))}),o.prefixHrefs&&l.querySelectorAll("[href]").forEach(t=>{let r=t.getAttribute("href").trim();!r.startsWith("#")&&!r.startsWith("data:")&&t.setAttribute("href",i.src.replace(/\/[^/]*$/,"/")+r)}),i.width&&l.setAttribute("width",i.width),i.height&&l.setAttribute("height",i.height),o.styleToAttributes&&l.querySelectorAll("[style]").forEach(t=>{let r=t.getAttribute("style");r&&(r.trim().split(/ *; */).forEach(f=>{if(f&&f.substring(0,1)!=="-"){let s=f.trim().split(/ *: */);t.setAttribute(s[0],s[1])}}),t.removeAttribute("style"))}),o.markersWorkaround)for(let t of["fill","stroke"])l.querySelectorAll(`marker *[${t}]`).forEach(r=>{let f=r.getAttribute(t);(f==="context-fill"||f==="context-stroke")&&r.removeAttribute(t)});if(o.idRewrite){let t={},r={},f=function(e,a){r[e]!==void 0?r[e].push(a):r[e]=[a]};l.querySelectorAll("*").forEach(e=>{let a=e.id;a&&(t[a]=e);for(let c of L){let h=e.getAttribute(c);if(h){let x=h.trim().match(/^url\(#(.+?)\)$/);x&&f(x[1],{o:e,a:c})}}var u=e.getAttribute("href");if(u){var n=u.trim().match(/^#(.+?)$/);n&&f(n[1],{o:e,a:"href"})}});let s={};for(let e in r){let a=H();t[e].id=a,s[e]=a,t[e].classList.add(`idwas-${e}`)}for(let e in r){let a=s[e],u=r[e];for(let n of u){let c=n.o.getAttribute(n.a),h;n.a==="href"?h=c.replace("#"+e,"#"+a):h=c.replace("(#"+e+")","(#"+a+")"),c!==h&&n.o.setAttribute(n.a,h)}}}d=m.innerHTML}return I("div",{[i.wrap===void 0?"outerHTML":"innerHTML"]:d,width:i.width,height:i.height})}}};export{W as _};
